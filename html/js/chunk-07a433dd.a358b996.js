(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07a433dd"],{"5c97":function(e,t,r){},7638:function(e,t,r){"use strict";r.d(t,"h",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"g",(function(){return n})),r.d(t,"i",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"f",(function(){return o})),r.d(t,"e",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return d}));var a="SECTOR_TYPE",i="Inv",n="PRINTER",s={edit:"edit",add:"add"},u={name:100,enterprise:2,site:2,area:4,sector:4,location:6,workCenter:20,workStation:20},o={area:"area",sector:"sector",location:"location"},c={Enterprise:"Enterprise",Site:"Site",Area:"Area",Sector:"Sector",Location:"Location",WorkCenter:"WorkCenter",WorkStation:"WorkStation",Device:"Device",AppCodeRule:"AppCodeRule",CodeInfo:"CodeInfo",UserGroup:"UserGroup",SignatureRule:"SignatureRule",MFGInstruction:"MFGInstruction"},l="XX[YYYY][MM][####]",d="MAX"},"7d9e":function(e,t,r){"use strict";var a=r("5c97"),i=r.n(a);i.a},"8eac":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{ref:"modal",attrs:{closable:!1,"mask-closable":!1,width:e.modalWidth},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:e.icon}}),r("span",[e._v(e._s(e.title))])],1),e._t("default"),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{disabled:e.loading},on:{click:e.cancelEvent}},[e._v("\n      "+e._s(e.canceltext)+"\n    ")]),e.isOk?r("Button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.okEvent}},[e._v(e._s(e.$t("common.buttons.ok")))]):e._e()],1)],2)},i=[],n=(r("c5f6"),{name:"edit-modal",props:{value:{type:Boolean,default:!1},isAdding:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},modalWidth:{type:Number,default:520},subtitle:{type:String,default:""},isOk:{type:Boolean,default:!0},subIcon:{type:String,default:""},subCanceltext:{type:String,default:""}},data:function(){return{icon:this.subIcon||"md-create",title:this.subtitle||this.$t("common.actions.edit"),visible:this.value,editing:!this.isAdding,canceltext:this.subCanceltext||this.$t("common.buttons.cancel")}},methods:{cancelEvent:function(){this.$emit("cancel")},okEvent:function(){this.$emit("ok")},open:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.editing=e,this.icon=!0===e?"md-create":"md-add",this.title=this.subtitle?this.subtitle:!0===e?this.$t("common.actions.edit")+this.subtitle:this.$t("common.actions.add")+this.subtitle,this.visible=!0},close:function(){this.visible=!1,this.icon="md-create",this.title=this.$t("common.actions.edit"),this.editing=!1},scrollTop:function(){var e=this.$refs.modal.$el,t=e.getElementsByClassName("ivu-modal-body");if(t&&t.length>0){var r=t[0];r&&r.scroll&&this.$nextTick((function(){return r.scroll(0,0)}))}}},watch:{value:function(e){this.visible=e,this.title=this.subtitle},visible:function(e){!0===e&&this.scrollTop()},subtitle:function(e){this.title=e}}}),s=n,u=(r("7d9e"),r("2877")),o=Object(u["a"])(s,a,i,!1,null,"0f32854a",null),c=o.exports;t["a"]=c},ec8d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("edit-modal",{ref:"editModal",staticClass:"custom-width",attrs:{isAdding:e.isAdding,loading:e.okLoading,modalWidth:650},on:{cancel:e.cancel,ok:e.ok}},[r("Form",{ref:"editModalForm",attrs:{"label-width":85,model:e.editModal,rules:e.rules}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{error:e.err.uniqueSiteMessage,label:e.$t("product.factory.site.title")+e.$t("product.factory.code"),prop:"site"}},[r("site-table",{attrs:{disabled:e.codeDisabled,selected:e.siteSelected,validCode:e.changeSiteHandler},on:{change:function(t){return e.changeSiteHandler(t)}}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{error:e.err.uniqueSiteNameMessage,label:e.$t("product.factory.site.title")+e.$t("product.factory.name"),prop:"siteName"}},[r("Input",{attrs:{disabled:e.siteNameDisabled,placeholder:e.$t("common.placeholders.plsInput")+e.$t("product.factory.site.title")+e.$t("product.factory.name")},on:{"on-change":e.changeSiteName},model:{value:e.editModal.siteName,callback:function(t){e.$set(e.editModal,"siteName",t)},expression:"editModal.siteName"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{error:e.err.uniqueAreaMessage,label:e.$t("product.factory.area.title")+e.$t("product.factory.code"),prop:"area"}},[r("area-table",{attrs:{disabled:e.codeDisabled,selected:e.areaSelected,validCode:e.uniqueAreaCodeValid,where:e.areaWhere},on:{change:function(t){return e.changeAreaHandler(t)}}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{error:e.err.uniqueAreaNameMessage,label:e.$t("product.factory.area.title")+e.$t("product.factory.name"),prop:"areaName"}},[r("Input",{attrs:{disabled:e.areaNameDisabled,placeholder:e.$t("common.placeholders.plsInput")+e.$t("product.factory.area.title")+e.$t("product.factory.name")},on:{"on-change":e.changeAreaName},model:{value:e.editModal.areaName,callback:function(t){e.$set(e.editModal,"areaName",t)},expression:"editModal.areaName"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{error:e.err.uniqueSectorMessage,label:e.$t("product.factory.sector.title")+e.$t("product.factory.code"),prop:"sector"}},[e.codeDisabled?r("Input",{attrs:{disabled:e.areaNameDisabled},model:{value:e.editModal.sector,callback:function(t){e.$set(e.editModal,"sector",t)},expression:"editModal.sector"}}):r("auto-complete",{on:{"on-blur":e.uniqueSectorCodeValid,"on-change":e.changeSectorHandler},model:{value:e.editModal.sector,callback:function(t){e.$set(e.editModal,"sector",t)},expression:"editModal.sector"}},e._l(e.locSector,(function(t){return r("Option",{key:t.id,attrs:{value:t.code}},[e._v(e._s(t.code))])})),1)],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{error:e.err.uniqueSectorNameMessage,label:e.$t("product.factory.sector.title")+e.$t("product.factory.name"),prop:"sectorName"}},[r("Input",{attrs:{disabled:e.sectorNameDisabled,placeholder:e.$t("common.placeholders.plsInput")+e.$t("product.factory.sector.title")+e.$t("product.factory.name")},on:{"on-change":e.changeSectorName},model:{value:e.editModal.sectorName,callback:function(t){e.$set(e.editModal,"sectorName",t)},expression:"editModal.sectorName"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:e.$t("product.factory.code"),prop:"code"}},[r("Input",{attrs:{disabled:e.codeDisabled,placeholder:e.$t("common.placeholders.plsInput")+e.$t("product.factory.code")},model:{value:e.editModal.code,callback:function(t){e.$set(e.editModal,"code",t)},expression:"editModal.code"}})],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:e.$t("product.factory.name"),prop:"name"}},[r("Input",{attrs:{placeholder:e.$t("common.placeholders.plsInput")+e.$t("product.factory.name")},model:{value:e.editModal.name,callback:function(t){e.$set(e.editModal,"name",t)},expression:"editModal.name"}})],1)],1)],1)],1)],1)],1)},i=[],n=(r("7514"),r("53ca")),s=(r("20d6"),r("7f7f"),r("96cf"),r("1da1")),u=r("8eac"),o=r("b893"),c=r("963c"),l=r("7638"),d=r("70af"),h=r("7c6b"),m=r("3b8e"),p="code",f="name",g={name:"upsert-location",mixins:[d["validMixins"]],inheritAttrs:!1,props:{icon:{type:String},title:{type:String},show:{type:Boolean,default:!0},isAdding:{type:Boolean,default:!0},item:{type:Object,default:function(){return{}}}},components:{editModal:u["a"],siteTable:m["c"],areaTable:m["a"]},data:function(){var e=this;return{sectors:[],siteSelected:[],areaSelected:[],areaWhere:{},locSector:[],siteNameDisabled:!this.isAdding,areaNameDisabled:!this.isAdding,sectorNameDisabled:!this.isAdding,err:{uniqueSiteFlag:!0,uniqueSiteMessage:"",uniqueSiteNameFlag:!0,uniqueSiteNameMessage:"",uniqueAreaFlag:!0,uniqueAreaMessage:"",uniqueAreaNameFlag:!0,uniqueAreaNameMessage:"",uniqueSectorFlag:!0,uniqueSectorMessage:"",uniqueSectorNameFlag:!0,uniqueSectorNameMessage:""},areas:[],editModal:this.item||{},rules:{name:[{required:!0,message:this.$t("common.rules.plsInput")+this.$t("product.supplier.name")},{trigger:"blur",validator:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r,a,i){var n,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.editModal.name,s=e.validNameLength({val:n,min:1,max:l["a"].name}),"string"!==typeof s){t.next=5;break}return i(s),t.abrupt("return");case 5:if(u=e.validNameCharacter(n),"string"!==typeof u){t.next=9;break}return i(u),t.abrupt("return");case 9:return t.next=11,e.uniqueNameValid(i);case 11:case"end":return t.stop()}}),t)})));function r(e,r,a){return t.apply(this,arguments)}return r}()}],code:[{required:!0,message:this.$t("common.rules.plsInput")+this.$t("product.supplier.code")},{trigger:"blur",validator:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r,a,i){var n,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.editModal.code,s=e.validCodeLength({val:n,min:1,max:l["a"].location}),"string"!==typeof s){t.next=5;break}return i(s),t.abrupt("return");case 5:if(u=e.validCodeCharacter(n),"string"!==typeof u){t.next=9;break}return i(u),t.abrupt("return");case 9:return t.next=11,e.uniqueIdValid(i);case 11:case"end":return t.stop()}}),t)})));function r(e,r,a){return t.apply(this,arguments)}return r}()}]}}},computed:{codeDisabled:function(){return!this.isAdding}},watch:{siteNameDisabled:function(){this.filterSector()},areaNameDisabled:function(){this.filterSector()}},mounted:function(){this.init()},methods:{init:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.codeDisabled&&(this.item.site&&(this.siteSelected=[this.item.site],this.editModal.siteName=this.item.site.name),this.item.area&&(this.areaSelected=[this.item.areaInfo])),this.$refs.editModal.open(!this.isAdding);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isClearSector:function(e){var t=this.editModal.sector;if(this.err.uniqueSectorFlag&&this.err.uniqueSectorNameFlag&&(this.sectorNameDisabled&&~e.findIndex((function(e){return e.code===(t&&t.code)}))||!this.sectorNameDisabled))return!1;this.editModal.sector="",this.editModal.sectorName="",this.sectorNameDisabled=!1,this.setSectorCodeErr(!0,""),this.setSectorNameErr(!0,"")},filterSector:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.sectors.concat([]),this.areaNameDisabled&&this.siteNameDisabled){e.next=5;break}return this.locSector=t,this.isClearSector(t),e.abrupt("return",!1);case 5:return r=this.editModal.area,e.next=8,Object(o["f"])(h["d"].pagination,{locations_some:{area:{code:"string"==typeof r?r:r.code}}});case 8:a=e.sent,this.locSector=t.concat(a),this.isClearSector(this.locSector);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uniqueSiteNameValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.target.value,"object"!==Object(n["a"])(this.editModal.site)&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.validSite(f,r);case 5:a=e.sent,i=a.uniqueFlag,s=a.uniqueMessage,this.err.uniqueSiteNameFlag=i,this.err.uniqueSiteNameMessage=s;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),isString:function(e){return"string"===typeof e},codeValid:function(e,t,r){var a=this.validCodeLength({val:e,min:t,max:r}),i=this.validCodeCharacter(e);return a||i},nameValid:function(e,t,r){var a=this.validNameLength({val:e,min:t,max:r}),i=this.validNameCharacter(e);return a||i},validSite:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t!==p){e.next=4;break}if(a=this.codeValid(r,l["a"].site,l["a"].site),!this.isString(a)){e.next=4;break}return e.abrupt("return",{uniqueFlag:!1,uniqueMessage:a});case 4:if(t!==f){e.next=14;break}if(i=this.nameValid(r,1,l["a"].name),!this.isString(i)){e.next=8;break}return e.abrupt("return",{uniqueFlag:!1,uniqueMessage:i});case 8:return e.next=10,this.validUniqueRes({propName:t,propVal:r,id:null,moduleName:l["e"].Site});case 10:return n=e.sent,s=n.uniqueFlag,u=n.uniqueMessage,e.abrupt("return",{uniqueFlag:s,uniqueMessage:u});case 14:return e.abrupt("return",{uniqueFlag:!0,uniqueMessage:""});case 15:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),uniqueAreaCodeValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:clearTimeout(this.areaTimer),this.areaTimer=setTimeout(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.manualAreaValid(t);case 2:case"end":return e.stop()}}),e)}))),300);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),manualAreaValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.target.value,"object"!==Object(n["a"])(this.editModal.area)&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.validArea(p,r);case 5:if(a=e.sent,i=a.uniqueFlag,s=a.uniqueMessage,this.err.uniqueAreaFlag=i,this.err.uniqueAreaMessage=s||"",this.editModal.area=r,i){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,h["a"].getAreaByCode(r);case 15:u=e.sent,u?(o=this.areas.find((function(e){return e.code==u.code})),o?this.changeAreaHandler([u]):(this.err.uniqueAreaFlag=!1,this.err.uniqueAreaMessage=this.$t("product.factory.location.areaExist"))):this.changeAreaHandler(r);case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uniqueAreaNameValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.target.value,"object"!==Object(n["a"])(this.editModal.area)&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.validArea(f,r);case 5:a=e.sent,i=a.uniqueFlag,s=a.uniqueMessage,this.err.uniqueAreaNameFlag=i,this.err.uniqueAreaNameMessage=s;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),validArea:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t!==p){e.next=4;break}if(a=this.codeValid(r,l["a"].area,l["a"].area),!this.isString(a)){e.next=4;break}return e.abrupt("return",{uniqueFlag:!1,uniqueMessage:a});case 4:if(t!==f){e.next=14;break}if(i=this.nameValid(r,1,l["a"].name),!this.isString(i)){e.next=8;break}return e.abrupt("return",{uniqueFlag:!1,uniqueMessage:i});case 8:return e.next=10,this.validUniqueRes({propName:t,propVal:r,id:null,moduleName:l["e"].Area});case 10:return n=e.sent,s=n.uniqueFlag,u=n.uniqueMessage,e.abrupt("return",{uniqueFlag:s,uniqueMessage:u});case 14:return e.abrupt("return",{uniqueFlag:!0,uniqueMessage:""});case 15:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),uniqueSectorCodeValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:clearTimeout(this.timer),this.timer=setTimeout(Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.target.value,r.setSectorCodeErr(!0,""),"object"!==Object(n["a"])(r.editModal.sector)&&a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.validSector(p,a);case 6:if(i=e.sent,s=i.uniqueFlag,u=i.uniqueMessage,!s){e.next=14;break}return e.next=12,r.checkExistSector(a);case 12:e.next=16;break;case 14:r.err.uniqueSectorFlag=s,r.err.uniqueSectorMessage=u||"";case 16:r.checkAreaSite();case 17:case"end":return e.stop()}}),e)}))),200);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkAreaSite:function(){var e=this.editModal,t=e.site,r=e.siteName,a=e.area,i=e.areaName;t||this.setSiteCodeErr(!1,this.$t("common.rules.plsSelect")),r||this.setSiteNameErr(!1,this.$t("common.rules.plsInput")),a||this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),i||this.setAreaNameErr(!1,this.$t("common.rules.plsInput"))},uniqueSectorNameValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.target.value,"object"!==Object(n["a"])(this.editModal.sector)&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.validSector(f,r);case 5:a=e.sent,i=a.uniqueFlag,s=a.uniqueMessage,this.err.uniqueSectorNameFlag=i,this.err.uniqueSectorNameMessage=s;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),validSector:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t!==p){e.next=4;break}if(a=this.codeValid(r,l["a"].sector,l["a"].sector),!this.isString(a)){e.next=4;break}return e.abrupt("return",{uniqueFlag:!1,uniqueMessage:a});case 4:if(t!==f){e.next=14;break}if(i=this.nameValid(r,1,l["a"].name),!this.isString(i)){e.next=8;break}return e.abrupt("return",{uniqueFlag:!1,uniqueMessage:i});case 8:return e.next=10,this.validUniqueRes({propName:t,propVal:r,id:null,moduleName:l["e"].Sector});case 10:return n=e.sent,s=n.uniqueFlag,u=n.uniqueMessage,e.abrupt("return",{uniqueFlag:s,uniqueMessage:u});case 14:return e.abrupt("return",{uniqueFlag:!0,uniqueMessage:""});case 15:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),uniqueIdValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.validUnique({propName:p,propVal:this.editModal.code,id:this.editModal.id,moduleName:l["e"].Location},t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uniqueNameValid:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.validUnique({propName:f,propVal:this.editModal.name,id:this.editModal.id,moduleName:l["e"].Location},t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeSiteHandler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n,s,u,o,c,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="",!t||!t.length&&!t.target.value){e.next=24;break}if(!(t instanceof Array)){e.next=11;break}return a=t[0].code,e.next=6,h["e"].getSiteByCode(a);case 6:r=e.sent,this.siteSelected=[r],this.areas=r.areas,e.next=24;break;case 11:if(i=t.target.value,e.t0=i,!e.t0){e.next=17;break}return e.next=16,this.validSite(p,i);case 16:e.t0=e.sent;case 17:if(n=e.t0,!n.uniqueFlag){e.next=23;break}return e.next=21,h["e"].getSiteByCode(i);case 21:s=e.sent,s&&(this.siteSelected=[s],this.areas=s.areas);case 23:r=s||i;case 24:if(this.editModal.site=r,!r){e.next=59;break}if(this.isString(r)){e.next=43;break}return this.areaWhere={site:{code:r.code}},this.siteNameDisabled=!0,this.editModal.siteName=r.name,this.editModal.area="",this.editModal.areaName="",this.areaSelected=[],this.areaNameDisabled=!1,this.setSiteCodeErr(!0,""),this.setSiteNameErr(!0,""),this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),e.next=39,this.validArea(f,this.editModal.areaName);case 39:u=e.sent,this.setAreaNameErr(u.uniqueFlag,u.uniqueMessage),e.next=57;break;case 43:return this.manualSiteCode(),e.next=46,this.validSite(p,r);case 46:return o=e.sent,this.setSiteCodeErr(o.uniqueFlag,o.uniqueMessage),e.next=50,this.validSite(f,this.editModal.siteName);case 50:return c=e.sent,this.setSiteNameErr(c.uniqueFlag,c.uniqueMessage),this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),e.next=55,this.validArea(f,this.editModal.areaName);case 55:l=e.sent,this.setAreaNameErr(l.uniqueFlag,l.uniqueMessage);case 57:e.next=70;break;case 59:if(this.manualSiteCode(),!this.editModal.siteName){e.next=69;break}return this.setSiteCodeErr(!1,this.$t("common.rules.plsSelect")),e.next=64,this.validSite(f,this.editModal.siteName);case 64:d=e.sent,this.setSiteNameErr(d.uniqueFlag,d.uniqueMessage),this.checkArea(),e.next=70;break;case 69:this.siteCodeNameIsNull();case 70:this.filterSector();case 71:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),manualSiteCode:function(){this.areas=[],this.editModal.area="",this.areaSelected=[],this.siteNameDisabled=!1,this.areaNameDisabled=!1},changeSiteName:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uniqueSiteNameValid(t),this.err.uniqueSiteNameFlag){e.next=3;break}return e.abrupt("return",!1);case 3:if(r=t.target.value,!this.editModal.site){e.next=13;break}return e.next=7,this.validSite(f,r);case 7:a=e.sent,i=a.uniqueFlag,n=a.uniqueMessage,this.setSiteNameErr(i,n),e.next=27;break;case 13:if(!r){e.next=26;break}return e.next=16,this.validSite(p,this.editModal.site);case 16:return s=e.sent,this.setSiteCodeErr(s.uniqueFlag,s.uniqueMessage),e.next=20,this.validSite(f,r);case 20:u=e.sent,this.setSiteNameErr(u.uniqueFlag,u.uniqueMessage),!this.editModal.area&&this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),!this.editModal.areaName&&this.setAreaNameErr(!1,this.$t("common.rules.plsSelect")),e.next=27;break;case 26:this.siteCodeNameIsNull();case 27:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),siteCodeNameIsNull:function(){return this.editModal.area||this.editModal.areaName?!this.editModal.area&&this.editModal.areaName?(this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),!1):this.editModal.area&&!this.editModal.areaName?(this.setAreaNameErr(!1,this.$t("common.rules.plsInput")),!1):void 0:(this.setSiteCodeErr(!0,""),this.setSiteNameErr(!0,""),this.setAreaCodeErr(!0,""),this.setAreaNameErr(!0,""),!1)},changeAreaHandler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="",!this.isString(t)){e.next=14;break}return e.next=4,this.validArea(p,t);case 4:if(a=e.sent,e.t0=a.uniqueFlag,!e.t0){e.next=10;break}return e.next=9,h["a"].getAreaByCode(t);case 9:i=e.sent;case 10:r=i||t,this.editModal.area=i?i.code:t,e.next=16;break;case 14:r=t[0],this.editModal.area=r.code;case 16:if(!r){e.next=36;break}if(this.isString(r)){e.next=24;break}this.areaNameDisabled=!0,this.editModal.areaName=r.name,this.setAreaCodeErr(!0,""),this.setAreaNameErr(!0,""),e.next=33;break;case 24:return this.areaNameDisabled=!1,e.next=27,this.validArea(p,r);case 27:return n=e.sent,this.setAreaCodeErr(n.uniqueFlag,n.uniqueMessage),e.next=31,this.validArea(f,this.editModal.areaName);case 31:s=e.sent,this.setAreaNameErr(s.uniqueFlag,s.uniqueMessage);case 33:this.checkSite(),e.next=46;break;case 36:if(this.areaNameDisabled=!1,!this.editModal.site&&!this.editModal.areaName){e.next=45;break}return this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),e.next=41,this.validArea(f,this.editModal.areaName);case 41:u=e.sent,this.setAreaNameErr(u.uniqueFlag,u.uniqueMessage),e.next=46;break;case 45:this.siteCodeNameIsNull();case 46:this.filterSector();case 47:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeAreaName:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uniqueAreaNameValid(t),this.err.uniqueAreaNameFlag){e.next=3;break}return e.abrupt("return",!1);case 3:if(r=t.target.value,!this.editModal.area){e.next=13;break}return e.next=7,this.validArea(f,r);case 7:a=e.sent,i=a.uniqueFlag,n=a.uniqueMessage,this.setAreaNameErr(i,n),e.next=26;break;case 13:if(!r){e.next=25;break}return e.next=16,this.validArea(p,this.editModal.sector);case 16:return s=e.sent,this.setAreaCodeErr(s.uniqueFlag,s.uniqueMessage),e.next=20,this.validArea(f,r);case 20:u=e.sent,this.setAreaNameErr(u.uniqueFlag,u.uniqueMessage),this.checkSite(),e.next=26;break;case 25:this.editModal.site||this.editModal.siteName?(this.setAreaCodeErr(!1,this.$t("common.rules.plsSelect")),this.setAreaNameErr(!1,this.$t("common.rules.plsSelect"))):this.siteCodeNameIsNull();case 26:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkArea:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.editModal,r=t.area,a=t.areaName,"string"!==typeof r&&"undefined"!==typeof r){e.next=10;break}return e.next=4,this.validArea(p,r||"");case 4:return i=e.sent,this.setAreaCodeErr(i.uniqueFlag,i.uniqueMessage),e.next=8,this.validArea(f,a||"");case 8:n=e.sent,this.setAreaNameErr(n.uniqueFlag,n.uniqueMessage);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkSite:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.editModal,r=t.site,a=t.siteName,"string"!==typeof r&&"undefined"!==typeof r){e.next=10;break}return e.next=4,this.validSite(p,r||"");case 4:return i=e.sent,this.setSiteCodeErr(i.uniqueFlag,i.uniqueMessage),e.next=8,this.validSite(f,a||"");case 8:n=e.sent,this.setSiteNameErr(n.uniqueFlag,n.uniqueMessage);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkExistSector:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=6;break}return e.next=3,h["d"].getSectorByCode(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t;case 7:if(r=e.t0,r){e.next=10;break}return e.abrupt("return");case 10:a=this.locSector.find((function(e){return e.code==r.code})),a||this.checkSectorCanUse(r)?(this.sectorNameDisabled=!0,this.editModal.sectorName=r.name,this.setSectorCodeErr(!0,""),this.setSectorNameErr(!0,"")):this.setSectorCodeErr(!1,this.$t("product.factory.location.sectorExist"));case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkSectorCanUse:function(e){return!this.editModal.area||!e.locations.length},changeSectorHandler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="",!t){e.next=11;break}return e.next=4,this.validSector(p,t);case 4:if(a=e.sent,e.t0=a.uniqueFlag,!e.t0){e.next=10;break}return e.next=9,h["d"].getSectorByCode(t);case 9:i=e.sent;case 10:r=i||t;case 11:if(!r){e.next=28;break}if(this.isString(r)){e.next=17;break}return e.next=15,this.checkExistSector(r);case 15:e.next=26;break;case 17:return this.sectorNameDisabled=!1,e.next=20,this.validSector(p,r);case 20:return n=e.sent,this.setSectorCodeErr(n.uniqueFlag,n.uniqueMessage),e.next=24,this.validSector(f,this.editModal.sectorName);case 24:s=e.sent,this.setSectorNameErr(s.uniqueFlag,s.uniqueMessage);case 26:e.next=31;break;case 28:this.editModal.sectorName="",this.setSectorCodeErr(!0,""),this.setSectorNameErr(!0,"");case 31:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeSectorName:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,n,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uniqueSectorNameValid(t),this.err.uniqueSectorNameFlag){e.next=3;break}return e.abrupt("return",!1);case 3:if(r=t.target.value,!this.editModal.sector){e.next=13;break}return e.next=7,this.validSector(f,r);case 7:a=e.sent,i=a.uniqueFlag,n=a.uniqueMessage,this.setSectorNameErr(i,n),e.next=26;break;case 13:if(!r){e.next=24;break}return e.next=16,this.validSector(p,this.editModal.sector);case 16:return s=e.sent,this.setSectorCodeErr(s.uniqueFlag,s.uniqueMessage),e.next=20,this.validSector(f,r);case 20:u=e.sent,this.setSectorNameErr(u.uniqueFlag,u.uniqueMessage),e.next=26;break;case 24:this.setSectorCodeErr(!0,""),this.setSectorNameErr(!0,"");case 26:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setSectorCodeErr:function(e,t){this.err.uniqueSectorFlag=!!e,this.err.uniqueSectorMessage=t||""},setSectorNameErr:function(e,t){this.err.uniqueSectorNameFlag=!!e,this.err.uniqueSectorNameMessage=t||""},setAreaCodeErr:function(e,t){this.err.uniqueAreaFlag=!!e,this.err.uniqueAreaMessage=t||""},setAreaNameErr:function(e,t){this.err.uniqueAreaNameFlag=!!e,this.err.uniqueAreaNameMessage=t||""},setSiteCodeErr:function(e,t){this.err.uniqueSiteFlag=!!e,this.err.uniqueSiteMessage=t||""},setSiteNameErr:function(e,t){this.err.uniqueSiteNameFlag=!!e,this.err.uniqueSiteNameMessage=t||""},getSiteParam:function(e,t){var r={};return e?(this.isString(e)?r.create={name:t,code:e}:r.connect={id:e.id},r):r},getAreaParam:function(e,t,r,a){var i={};return t?(this.areaNameDisabled?i.connect={code:t}:(i.create={code:t,name:a},i.create.site=this.getSiteParam(e,r)),i):i},getSectorParam:function(e,t){var r={};return e?(this.sectorNameDisabled?r.connect={code:e}:r.create={name:t,code:e},r):r},ok:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.editModalForm.validate();case 2:if(t=e.sent,t&&this.err.uniqueSiteFlag&&this.err.uniqueSiteNameFlag&&this.err.uniqueAreaFlag&&this.err.uniqueAreaNameFlag&&this.err.uniqueSectorFlag&&this.err.uniqueSectorNameFlag){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.doOkHandler();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),add:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,s,u,o,l,d,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.editModal,r=t.code,a=t.name,i=t.area,n=t.sector,s=t.site,u=t.siteName,o=t.areaName,l=t.sectorName,d=i&&this.getAreaParam(s,i,u,o),h=n&&this.getSectorParam(n,l),m={code:r,name:a,area:d},h&&(m.sector=h),e.next=7,c["create"](m);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),edit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.editModal,r=t.id,a=t.name,e.next=3,c["update"]({where:{id:r},data:{name:a}});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$refs.editModal.close(),this.$emit("cancel")}}},b=g,v=r("2877"),S=Object(v["a"])(b,a,i,!1,null,null,null);t["default"]=S.exports}}]);