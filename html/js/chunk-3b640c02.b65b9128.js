(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b640c02"],{1853:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("edit-modal",{ref:"editModal",staticClass:"custom-width",attrs:{isAdding:t.isAdding,loading:t.okLoading,modalWidth:996},on:{cancel:t.cancel,ok:t.ok}},[n("Form",{ref:"editModalForm",attrs:{"label-width":100,model:t.editModal,rules:t.rules}},[n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.code"),prop:"code"}},[n("Input",{attrs:{disabled:t.codeDisabled,"error-messages":t.uniqueMessage,placeholder:t.$t("common.placeholders.plsInput")+t.$t("product.factory.code")},on:{blur:t.uniqueIdValid},model:{value:t.editModal.code,callback:function(e){t.$set(t.editModal,"code",e)},expression:"editModal.code"}})],1)],1),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.name"),prop:"name"}},[n("Input",{attrs:{"error-messages":t.uniqueNameMessage,placeholder:t.$t("common.placeholders.plsInput")+t.$t("product.factory.name")},on:{blur:t.uniqueNameValid},model:{value:t.editModal.name,callback:function(e){t.$set(t.editModal,"name",e)},expression:"editModal.name"}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"8"}},[n("FormItem",{attrs:{label:t.$t("product.factory.site.title"),prop:"site"}},[n("Select",{on:{"on-change":t.changeSiteHandler},model:{value:t.editModal.site,callback:function(e){t.$set(t.editModal,"site",e)},expression:"editModal.site"}},t._l(t.sites,(function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),n("Col",{attrs:{span:"8"}},[n("FormItem",{attrs:{label:t.$t("product.factory.area.title"),prop:"area"}},[n("Select",{on:{"on-change":t.changeAreaHandler},model:{value:t.editModal.area,callback:function(e){t.$set(t.editModal,"area",e)},expression:"editModal.area"}},t._l(t.areas,(function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),n("Col",{attrs:{span:"8"}},[n("FormItem",{attrs:{label:t.$t("product.factory.location.title"),prop:"location"}},[n("Select",{on:{"on-change":t.changeLocationHandler},model:{value:t.editModal.location,callback:function(e){t.$set(t.editModal,"location",e)},expression:"editModal.location"}},t._l(t.locations,(function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1)],1),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.sector.title"),prop:"sector"}},[n("Select",{on:{"on-change":t.changeSectorHandler},model:{value:t.editModal.sector,callback:function(e){t.$set(t.editModal,"sector",e)},expression:"editModal.sector"}},t._l(t.curSectors,(function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),n("Col",{attrs:{span:"12"}})],1),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.workCenter.primaryPickingSector"),prop:"primaryPickingSector"}},[n("Select",{on:{"on-change":t.changePrimaryPickSector},model:{value:t.editModal.primaryPickingSector,callback:function(e){t.$set(t.editModal,"primaryPickingSector",e)},expression:"editModal.primaryPickingSector"}},t._l(t.pickingSector,(function(e){return n("Option",{key:e.id,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1)],1),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.workCenter.primaryUnstockedPath"),prop:"primaryUnstockedPath"}},[n("Input",{attrs:{disabled:!t.pupDisable,placeholder:t.$t("common.placeholders.plsInput")+t.$t("product.factory.workCenter.primaryUnstockedPath")},model:{value:t.editModal.primaryUnstockedPath,callback:function(e){t.$set(t.editModal,"primaryUnstockedPath",e)},expression:"editModal.primaryUnstockedPath"}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.workCenter.secondPickingSector"),prop:"secondPickingSector"}},[n("Select",{on:{"on-change":t.changeSecondPickSector},model:{value:t.editModal.secondPickingSector,callback:function(e){t.$set(t.editModal,"secondPickingSector",e)},expression:"editModal.secondPickingSector"}},t._l(t.pickingSector,(function(e){return n("Option",{key:e.id,attrs:{value:e.code}},[t._v(t._s(e.name))])})),1)],1)],1),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.workCenter.secondUnstockedPath"),prop:"secondUnstockedPath"}},[n("Input",{attrs:{disabled:!t.spsDisable,placeholder:t.$t("common.placeholders.plsInput")+t.$t("product.factory.workCenter.secondUnstockedPath")},model:{value:t.editModal.secondUnstockedPath,callback:function(e){t.$set(t.editModal,"secondUnstockedPath",e)},expression:"editModal.secondUnstockedPath"}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{label:t.$t("product.factory.workCenter.returnPath"),prop:"returnPath"}},[n("Input",{attrs:{placeholder:t.$t("common.placeholders.plsInput")+t.$t("product.factory.workCenter.returnPath")},model:{value:t.editModal.returnPath,callback:function(e){t.$set(t.editModal,"returnPath",e)},expression:"editModal.returnPath"}})],1)],1),n("Col",{attrs:{span:"12"}})],1)],1)],1)],1)},r=[],a=(n("7514"),n("7f7f"),n("96cf"),n("1da1")),o=n("8eac"),c=n("2ec1"),s=n("7638"),l=n("70af"),d={name:"upsert-work-center",inheritAttrs:!1,mixins:[l["validMixins"]],props:{icon:{type:String},sites:{type:Array,default:function(){return[]}},allSectors:{type:Array,default:function(){return[]}},title:{type:String},show:{type:Boolean,default:!0},isAdding:{type:Boolean,default:!0},item:{type:Object,default:function(){return{}}}},components:{editModal:o["a"]},data:function(){var t=this;return{areas:[],unstockedPaths:[],returnPaths:[],locations:[],curSectors:this.allSectors,editModal:Object.assign({location:"",sector:""},this.item),pupDisable:!1,spsDisable:!1,dialogVisible:this.show,rules:{name:[{required:!0,message:this.$t("common.rules.plsInput")+this.$t("product.supplier.name")},{trigger:"blur",validator:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n,i,r){var a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.editModal.name,o=t.validNameLength({val:a,min:1,max:s["a"].name}),"string"!==typeof o){e.next=5;break}return r(o),e.abrupt("return");case 5:if(c=t.validNameCharacter(a),"string"!==typeof c){e.next=9;break}return r(c),e.abrupt("return");case 9:return e.next=11,t.uniqueNameValid(r);case 11:case"end":return e.stop()}}),e)})));function n(t,n,i){return e.apply(this,arguments)}return n}()}],code:[{required:!0,message:this.$t("common.rules.plsInput")+this.$t("product.supplier.code")},{trigger:"blur",validator:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n,i,r){var a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.editModal.code,o=t.validCodeLength({val:a,min:1,max:s["a"].workCenter}),"string"!==typeof o){e.next=5;break}return r(o),e.abrupt("return");case 5:if(c=t.validCodeCharacter(a),"string"!==typeof c){e.next=9;break}return r(c),e.abrupt("return");case 9:return e.next=11,t.uniqueIdValid(r);case 11:case"end":return e.stop()}}),e)})));function n(t,n,i){return e.apply(this,arguments)}return n}()}],location:[{required:!0,message:this.$t("common.rules.plsSelect")}]}}},computed:{codeDisabled:function(){return!this.isAdding},pickingSector:function(){var t=this.allSectors;return t.filter((function(t){return t.type.code===s["b"]}))}},mounted:function(){this.isAdding||this.initSelects(this.item),this.$refs.editModal.open(!this.isAdding)},methods:{uniqueIdValid:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validUnique({propName:"code",propVal:this.editModal.code,id:this.editModal.id,moduleName:s["e"].WorkCenter},e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),uniqueNameValid:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validUnique({propName:"name",propVal:this.editModal.name,id:this.editModal.id,moduleName:s["e"].WorkCenter},e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),initSelects:function(t){var e=t.site,n=e&&this.sites.find((function(t){return t.id===e})),i=t.location;if(n){this.changeSiteHandler(e);var r=t.area;r&&this.changeAreaHandler(r)}var a=t.sector;a&&this.changeSectorHandler(a),i&&(this.editModal.location=i,this.changeLocationHandler(i)),this.changePrimaryPickSector(this.editModal.primaryPickingSector),this.changeSecondPickSector(this.editModal.secondPickingSector)},changeSiteHandler:function(t){var e=this.sites.find((function(e){return e.id===t}));this.areas=e.areas,this.curSectors=[],this.locations=[],this.editModal.area="",this.editModal.location="",this.editModal.sector=""},changeAreaHandler:function(t){var e=this.areas.find((function(e){return e.id===t}));e&&(this.locations=e.locations,this.editModal.location="",this.editModal.sector="",this.curSectors=[])},changeLocationHandler:function(t){if(!t)return this.locations=[],this.curSectors=this.allSectors.concat([]),!1;var e=this.locations.find((function(e){return e.id===t}));if(e.sector){var n=e.sector;this.curSectors=[n],this.editModal.sector=n.id}else this.curSectors=[];if(!e.area)return!1;var i=e.area,r=i&&i.site,a=this.editModal.area&&this.editModal.area===i.id;if(r&&(this.editModal.site=i.site.id),0===this.areas.length&&r){var o=this.sites.filter((function(t){return t.id===i.site.id}));this.areas=o&&o.length&&o[0].areas||[]}!a&&i&&(0===this.areas.length&&this.areas.push(i),this.editModal.area=i.id)},changeSectorHandler:function(t){var e=this.curSectors.find((function(e){return e.id===t}));this.editModal.site||(this.locations=e.locations)},changePrimaryPickSector:function(t){this.pupDisable=!!t},changeSecondPickSector:function(t){this.spsDisable=!!t},getLocationData:function(t){return t?{connect:{id:t}}:{}},add:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,a,o,s,l,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.editModal,n=e.code,i=e.name,r=e.primaryPickingSector,a=e.secondPickingSector,o=e.primaryUnstockedPath,s=e.secondUnstockedPath,l=e.returnPath,d=e.location,u=this.getLocationData(d),t.next=4,c["create"]({location:u,code:n,name:i,primaryUnstockedPath:o,secondUnstockedPath:s,returnPath:l,primaryPickingSector:r,secondPickingSector:a});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),edit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,a,o,s,l,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.editModal,n=e.id,i=e.name,r=e.location,a=e.primaryUnstockedPath,o=e.secondUnstockedPath,s=e.returnPath,l=e.primaryPickingSector,d=e.secondPickingSector,u=this.getLocationData(r),t.next=4,c["update"](n,{location:u,name:i,secondUnstockedPath:o,primaryUnstockedPath:a,returnPath:s,primaryPickingSector:l,secondPickingSector:d});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$refs.editModal.close(),this.$emit("cancel")}}},u=d,p=n("2877"),h=Object(p["a"])(u,i,r,!1,null,"1063ed96",null);e["default"]=h.exports},"5c97":function(t,e,n){},7638:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"g",(function(){return a})),n.d(e,"i",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return u}));var i="SECTOR_TYPE",r="Inv",a="PRINTER",o={edit:"edit",add:"add"},c={name:100,enterprise:2,site:2,area:4,sector:4,location:6,workCenter:20,workStation:20},s={area:"area",sector:"sector",location:"location"},l={Enterprise:"Enterprise",Site:"Site",Area:"Area",Sector:"Sector",Location:"Location",WorkCenter:"WorkCenter",WorkStation:"WorkStation",Device:"Device",AppCodeRule:"AppCodeRule",CodeInfo:"CodeInfo",UserGroup:"UserGroup",SignatureRule:"SignatureRule",MFGInstruction:"MFGInstruction"},d="XX[YYYY][MM][####]",u="MAX"},"7d9e":function(t,e,n){"use strict";var i=n("5c97"),r=n.n(i);r.a},"8eac":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"modal",attrs:{closable:!1,"mask-closable":!1,width:t.modalWidth},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("p",{attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:t.icon}}),n("span",[t._v(t._s(t.title))])],1),t._t("default"),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{disabled:t.loading},on:{click:t.cancelEvent}},[t._v("\n      "+t._s(t.canceltext)+"\n    ")]),t.isOk?n("Button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.okEvent}},[t._v(t._s(t.$t("common.buttons.ok")))]):t._e()],1)],2)},r=[],a=(n("c5f6"),{name:"edit-modal",props:{value:{type:Boolean,default:!1},isAdding:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},modalWidth:{type:Number,default:520},subtitle:{type:String,default:""},isOk:{type:Boolean,default:!0},subIcon:{type:String,default:""},subCanceltext:{type:String,default:""}},data:function(){return{icon:this.subIcon||"md-create",title:this.subtitle||this.$t("common.actions.edit"),visible:this.value,editing:!this.isAdding,canceltext:this.subCanceltext||this.$t("common.buttons.cancel")}},methods:{cancelEvent:function(){this.$emit("cancel")},okEvent:function(){this.$emit("ok")},open:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.editing=t,this.icon=!0===t?"md-create":"md-add",this.title=this.subtitle?this.subtitle:!0===t?this.$t("common.actions.edit")+this.subtitle:this.$t("common.actions.add")+this.subtitle,this.visible=!0},close:function(){this.visible=!1,this.icon="md-create",this.title=this.$t("common.actions.edit"),this.editing=!1},scrollTop:function(){var t=this.$refs.modal.$el,e=t.getElementsByClassName("ivu-modal-body");if(e&&e.length>0){var n=e[0];n&&n.scroll&&this.$nextTick((function(){return n.scroll(0,0)}))}}},watch:{value:function(t){this.visible=t,this.title=this.subtitle},visible:function(t){!0===t&&this.scrollTop()},subtitle:function(t){this.title=t}}}),o=a,c=(n("7d9e"),n("2877")),s=Object(c["a"])(o,i,r,!1,null,"0f32854a",null),l=s.exports;e["a"]=l}}]);